<!DOCTYPE html>
<html>
{% include head.html %}

<body>
	{% include header.html %}
	<main>
			{{ content }}



			{% assign current_yymm = "" %}
			{% assign posts_ordered_by_permalink = site.posts | sort: 'permalink' | reverse %}
			{% assign posts_ordered_by_date = site.posts | sort: 'date' | reverse %}
			{% assign dates_and_permalinks_match = true %}
			{% for i in (0..posts_ordered_by_permalink.size) %}
				{% unless posts_ordered_by_permalink[i] == posts_ordered_by_date[i] %}
					{% assign dates_and_permalinks_match = false %}
				{% endunless %}
			{% endfor %}

			{% if dates_and_permalinks_match %}
			<div class=grid>
				{% for post in posts_ordered_by_permalink %}
				{% assign post_yymm = post.date | date: "%Y%m"  %}
				{% assign post_words = post.content | number_of_words %}
				{% if post_yymm != current_yymm %}
						{% if current_yymm != "" %}
						<div class="grid-gap-between-months"></div>
						{% endif %}
					{% assign current_yymm = post_yymm %}
					<div class="grid-month-year-title" >{{ post.date | date: "%B %Y" }}</div>
				{% endif %}
				<a class=grid-link href="{{ post.url | prepend: site.baseurl }}">
					<div class=grid-item>
							<div class="grid-post-title" >#{{ post.permalink }} | {{ post.title }} </div>
							<div class="grid-post-tags-words-container">
								<div class="grid-post-tags">{{ post_words }} words</div>
								{% for tag in post.tags %}
								<div class="grid-post-tags">{{ tag }}</div>
								{% endfor %}
							</div>
					</div>
			</a>
				{% endfor %}
			</div>

			{% else %}

			<div>Order of post dates don't match permalinks.</div>

			{% endif%

			{% include banner.html %}
	</main>
	{% include footer.html %}
</body>

</html>